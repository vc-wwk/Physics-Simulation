<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†·æ°£æ©Ÿå·¥ä½œåŸç†å‹•æ…‹ç¤ºç¯„</title>
    <style>
        :root {
            --cold-blue: #00d4ff;
            --hot-red: #ff4b2b;
            --pipe-gray: #ccc;
            --bg-color: #f4f7f6;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 900px;
            width: 100%;
        }

        h1 { color: #333; text-align: center; }

        #canvas-container {
            width: 100%;
            height: auto;
            margin: 20px 0;
        }

        /* SVG æ¨£å¼ */
        .pipe { fill: none; stroke: var(--pipe-gray); stroke-width: 12; stroke-linecap: round; }
        .flow-line { fill: none; stroke-width: 6; stroke-dasharray: 10, 15; animation: flow 2s linear infinite; }
        
        @keyframes flow {
            from { stroke-dashoffset: 50; }
            to { stroke-dashoffset: 0; }
        }

        .component { cursor: pointer; transition: 0.3s; }
        .component:hover { filter: brightness(1.1); transform: scale(1.02); }
        .label { font-size: 14px; font-weight: bold; fill: #444; pointer-events: none; }

        /* èªªæ˜é¢æ¿ */
        #info-panel {
            background: #eef2f3;
            padding: 15px;
            border-left: 5px solid #2196F3;
            border-radius: 4px;
            min-height: 80px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #2196F3;
            color: white;
            cursor: pointer;
            font-size: 1rem;
        }

        button:hover { background: #1976D2; }

        .heat-arrow { font-size: 24px; }
    </style>
</head>
<body>

<div class="card">
    <h1>â„ï¸ å†·æ°£æ©Ÿé‹ä½œåŸç†å‹•æ…‹æ¼”ç¤º</h1>
    
    <div class="controls">
        <button onclick="togglePower()">é–‹é—œé›»æº</button>
        <button onclick="changeSpeed()">åŠ é€Ÿå¾ªç’°</button>
    </div>

    <div id="canvas-container">
        <svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="#666" />
                </marker>
            </defs>

            <rect x="20" y="50" width="350" height="350" rx="10" fill="#e3f2fd" stroke="#bbdefb" />
            <text x="150" y="40" text-anchor="middle" font-weight="bold">å®¤å…§æ©Ÿ (è’¸ç™¼å™¨å´)</text>
            
            <rect x="430" y="50" width="350" height="350" rx="10" fill="#fff3e0" stroke="#ffe0b2" />
            <text x="600" y="40" text-anchor="middle" font-weight="bold">å®¤å¤–æ©Ÿ (å£“ç¸®æ©Ÿå´)</text>

            <path id="main-loop" class="pipe" d="M 200 150 L 500 150 L 600 150 L 600 300 L 200 300 L 200 150" />
            
            <path id="flow-high" class="flow-line" d="M 600 230 L 600 300 L 200 300" stroke="var(--hot-red)" />
            <path id="flow-low" class="flow-line" d="M 200 300 L 200 150 L 600 150 L 600 230" stroke="var(--cold-blue)" />

            <g class="component" onclick="showInfo('compressor')">
                <circle cx="600" cy="230" r="40" fill="#555" />
                <text x="600" y="235" text-anchor="middle" fill="white" font-size="12">å£“ç¸®æ©Ÿ</text>
            </g>

            <g class="component" onclick="showInfo('valve')">
                <rect x="380" y="280" width="40" height="40" fill="#9c27b0" />
                <text x="400" y="335" text-anchor="middle" class="label">è†¨è„¹é–¥</text>
            </g>

            <g class="component" onclick="showInfo('evaporator')">
                <path d="M 180 150 Q 200 130 220 150 T 260 150" fill="none" stroke="#2196F3" stroke-width="4" />
                <rect x="150" y="160" width="100" height="60" rx="5" fill="#bbdefb" />
                <text x="200" y="195" text-anchor="middle" font-size="12">è’¸ç™¼å™¨</text>
            </g>

            <g class="component" onclick="showInfo('condenser')">
                <rect x="550" y="60" width="100" height="60" rx="5" fill="#ffab91" />
                <text x="600" y="95" text-anchor="middle" font-size="12">å†·å‡å™¨</text>
            </g>

            <text x="100" y="200" class="heat-arrow">â™¨ï¸</text>
            <path d="M 60 190 L 140 190" stroke="#2196F3" stroke-width="2" marker-end="url(#arrow)" />
            <text x="60" y="220" font-size="12">å¸æ”¶å®¤å…§ç†±é‡</text>

            <text x="700" y="100" class="heat-arrow">ğŸ”¥</text>
            <path d="M 650 90 L 730 90" stroke="#f44336" stroke-width="2" marker-end="url(#arrow)" />
            <text x="680" y="125" font-size="12">æ’å‡ºç†±é‡</text>
        </svg>
    </div>

    <div id="info-panel">
        <strong>æ“ä½œæŒ‡å¼•ï¼š</strong> é»æ“Šä¸Šæ–¹çš„çµ„ä»¶ï¼ˆå£“ç¸®æ©Ÿã€è’¸ç™¼å™¨ç­‰ï¼‰ä¾†æŸ¥çœ‹å®ƒå€‘çš„åŠŸèƒ½èªªæ˜ã€‚
    </div>
</div>

<script>
    const infoData = {
        compressor: "ã€å£“ç¸®æ©Ÿã€‘ï¼šå¿ƒè‡Ÿéƒ¨ä½ã€‚å°‡ä½å£“ä½æº«çš„æ°£æ…‹å†·åª’å£“ç¸®æˆã€Œé«˜å£“é«˜æº«ã€çš„æ°£é«”ï¼Œæ¨å‹•å¾ªç’°ã€‚",
        condenser: "ã€å†·å‡å™¨ã€‘ï¼šæ•£ç†±å™¨ã€‚é«˜æº«å†·åª’åœ¨æ­¤å°‡ç†±é‡é‡‹æ”¾åˆ°å®¤å¤–ç©ºæ°£ä¸­ï¼Œå†·åª’å¾æ°£æ…‹å†·å‡æˆã€Œé«˜å£“æ¶²æ…‹ã€ã€‚",
        valve: "ã€è†¨è„¹é–¥ã€‘ï¼šç¯€æµè£ç½®ã€‚è®“é«˜å£“æ¶²é«”æ€¥é€Ÿé™å£“ï¼Œå†·åª’è®Šå¾—ã€Œä½å£“ä½æº«ã€ï¼Œæº–å‚™é€²å…¥å®¤å…§å¸ç†±ã€‚",
        evaporator: "ã€è’¸ç™¼å™¨ã€‘ï¼šè£½å†·æ ¸å¿ƒã€‚ä½æº«å†·åª’åœ¨æ­¤å¸æ”¶å®¤å…§ç†±é‡ä¸¦è’¸ç™¼ï¼Œä½¿å®¤å…§æº«åº¦ä¸‹é™ã€‚"
    };

    let isRunning = true;
    let speed = 2;

    function showInfo(part) {
        const panel = document.getElementById('info-panel');
        panel.innerHTML = infoData[part];
        panel.style.borderLeftColor = part === 'evaporator' ? '#00d4ff' : '#ff4b2b';
    }

    function togglePower() {
        isRunning = !isRunning;
        const flows = document.querySelectorAll('.flow-line');
        flows.forEach(f => f.style.animationPlayState = isRunning ? 'running' : 'paused');
        document.getElementById('info-panel').innerText = isRunning ? "ç³»çµ±å·²å•Ÿå‹•ï¼Œå¾ªç’°é‹è¡Œä¸­..." : "ç³»çµ±å·²é—œæ©Ÿã€‚";
    }

    function changeSpeed() {
        if (!isRunning) return;
        speed = speed <= 0.5 ? 2 : speed / 2;
        const flows = document.querySelectorAll('.flow-line');
        flows.forEach(f => f.style.animationDuration = speed + 's');
    }
</script>

</body>
</html>